dist: trusty
addons:
  chrome: stable
sudo: required
language: java
jdk:
- openjdk8
env:
  global:
  - TERM=dumb
  - MALLOC_ARENA_MAX=1
  - GRADLE_OPTS="-Xmx768m -Xms256m -XX:MaxPermSize=372m -XX:+CMSClassUnloadingEnabled"
  - GIT_NAME="Graeme Rocher"
  - GIT_EMAIL="graeme.rocher@gmail.com"
  - secure: RAY0iP3XkJDF6w6HXCigkzdO1fetzjMRYhuO7REUCI5EPQv3bgmpCTZz+91MzuXNI5fLzaJtOfGMYfVdIL+l3Jz3fusMmJjobScOep7XiNjAM76/2oV/SCcS8LTIgmP8MLGWcmVIONoARq9c9QsOX3VZGmmQ1ftbH2J4SootryIsC/NFa1hSlogl25tjByDvIDex17KhVjNWHITqik7Q5ydRtOqTw0oxdOwHWualjMcam6ox0ei2pb0HcEZQzR2mNcsYEa/pq/X3RH+mPhB+MxPDsarL5IzwnVU//2rSlbDGdvROhEuURaNVw/nxmbRkbzdZLWYSHJxKZ8iG7NzcNboQrMAZpAq1vc4axQnyy/1auFTXY/9AqnX5475lifNIlX433ecAV1eFLthgYuO8pootsHcaX75rMlTzkbD9FiwuqJum4KQsUp938nNaqyl+oaSab7IBji9WkHvX529cXn5B1Tpi1yyG/TjwQbBRil+iJmbiKKZh+YIHA336QxefbdhvWi3S5s6pEaivCkREVKukWuKNKEdh4sZ0SnsGrnnvTedK12EL6ZsQ10OS+CqMLYAa1k5uh0U93EqnmUEZ1VTGgGAqIXd/MSHX6psdHbSRefTXJvGJ1+WoxoIVzrk9D1fZCC7oZP3xVJlDyZHkPN2+g8WZO+Sy4Iha1HQSPFs=
  - secure: G03rPMTP/xnzVI4/B0dWawYRGp3fwEfIq3ETHipf/CVv7pxDWBCA+yExECfeTB5GK20xeDvbfp67R345/Pk2wuk9JCATt1TpMop0UtCWu/LmLJNBuLOZKcQTNZshWTCnDKg4oWXdPVEWdt2GKNLDCf2kiti9zaRhkFxqYCEkk1B8uV3z9XMNJKWgJ9/JxuTwfs1UXUzH9Jvxr2CJwK/y1FEFYOkTVDyeriKBqhGdBAiPQjALORbyHKLgsS6CJ4ydlCeNlUPLCn0tnforpSq85M7iCm0ZFGK81xLtwjX+yVf8bHSBWKSDMb2PgkJH9s65I34CqzHi3+H9Za20OvhoxeYNV/qqijbFc9ZeAdgJl2Nzb2ybIa4uADAL3N59Vv5BBEkrtwLGxypDjetahKE6dLKxUD45iYi2DIQ+5QQClcQ3jXI3KVr9pFYXSwCG45s/AY16nK7cxnD+oJYTTyujbOMPpnmkBMHbkGc9CJ/7bN2ulFJIAPD70S9pr/BrbXHFc6T8RPiGsdu3L5FGwrYPBZMrtUmxrcsQVXBRwifmoBo5ac1T4LYc0c2aFg6TSNVGTm+LiIq9vImaPtos43bRiKoISBuhjJXnJ4XqL52kbQWJTMD2s9Og9jGaGIKQAhS7VuYdC5NG7vw14RzMocNZUgHUu+BybLS237KC+LoCehk=
  - secure: VB/C5IeHDsweLUXry3iplaz0a8iK3kNcTZb1FANwpg5p2ky3w0vAcOH9E7Fus/fFHxF33/Wkafl8xLdqn1h52eld5I6cHme7RktExUd8QnDFfpO7ZUcVxaGiyamGwkRMOjQ594ETBHfw+yTN2HUbE9Igtbx8bXol+pCoqoQBw9mP+RqOM7jmIFB91ebwd+UERDww2+v5vyC0exZZ58vO7CkQOw6KH0m66yOmx1Hi24NvZVBWw5p6sbDXwo8zMMBg1a1D1jiC/OMAtSY7sW7YnIzgSLxOI1ClbSIMKXvLu0A7gnWG71tRXdcPzjqtfBqAaFNMnQhgL2LOe9K2j31ih4gKdram+xfUz7hmQhttNcwLu2gG5IqLw5OJgc34snBqDhvd52iKFeOBE2Q0vLvM8idl1f4wzXOtXdb3yNQ1uU9INJwSfmQy5U4KrrOO5S0HeLnejDTue8n3Q/PiJgISADc2j9m/rI7aFklSmMG75jYp+4KA54ohlKYu+lDUzr+7J1ugq9toX29nv2QbFGw+kIZmBCuXnh6ySKvoeXbVlPKrGC0FEp6iOJByUckoztg0FOmCEKC1tB3Wcx8Xayketp7rpnPb0c3gI080c21iEf5uBmUO+Zxzl3V9qyfcMCEOYlnqeHQGPeanSztSXqB2QO0n2nC1ttqoKemdqJwpCKM=
  - secure: K9jqn6EtCLIToi9LV0uDgqOQXzIgitpzehwY7qv1OmpOBBBNEhWb1u327cBgbrifKZ0cKc+byem7KppOwAlsQMl2KjKnl/6yjaeeGAx7IVySmVTEbXVTRz8vTGaKaDMpwFVOTuIjz4EzLhFC+iASgwn9n1cFX33CTVPiOxCMmbhTwia1Fk/jHF6QVHuhRTsE6Ig7UZF2XEtaVJqB4ruUA85AN40kvd+Se79P6fsFGrcgb1qHOjbMihd6cmSBAhaJI0muaJxu+gc1LNQoby/41MI7orYGGdMJdRSYrryyZvmaNwMVxdowcaf4SbiyUsA2nsQSxT+8qrRWdjqrFWdpqP5xdZVL0wH4kluxPK+3bosOOvwPNicbAbW1lQP02jCq2TosgjkojcN1POg9RcI5zEUE+tcYlkA0tp82tP3MU9xz2cVln0J4sC7AKlitInqCcsL9SLiKXz5MMN3pZ/t4x8uqVe5eqWxuKxW6x2EQX+mv3xuagciNb14SaWr14Rn8bJIMCouRWcCLdKN7ZfkivcVLpm1x7IlApNSNbwZ/5nTPqGrLF8wqVRs/nlI/3muea1VpacawUgfO+vtpACHADTLcO+coz6EF6hu7nrlzb67E7PSamIp2tcP8LKUugL4lGWAeya2acGIGEM3PlOCkmw7NW1/kjhvKqDQm4xeiE+k=
  - secure: a5CfYF4wXbd2zgGraJWWxQeJ0pZZM1nGh1dmiufWHOAz2pH8Kq4lC7xmyTrSbEHoePV1HrOkxu/zDN1Gn/bQ/7dHOYE3gtV+UIBQ7W0qRSZ+7Ayt7iviz44sCmKUF8AGsZPeBUkEoroaYY9yYN7W8wJfuJKIYLoDQc4FKb4KU9GI6oWPkfrkZlEUo+9g1pJNOL9qDegN9VYTecpRxKeSUFRPLVr34Iv3j633gaqYFMu3B8j4KFmGKgjWyhHEKJcVUi/EI7JTFiFM+hBmb3KZe52EB01/A6jgTqBcnl32KRyrWdsh0xWD+tdqIpsEW3xgHw9kljaMq5V8vL3tJ4i/DqruM6w2Lceb7ddlI5Cb5hfBvYJj5pb9u2zKoRqWXaY+ksoKYV2IZ9ZPxvo7jg9Tm9u/AywZfh3mblbivbXSDMtzhhSkZsp0SPcsI3bDKbH5be/barnnamLeRiLX+pBhlnoBWE9Y7l/wJktjnaCcoiabPU1JVJx3fQhpaim4NI8sS8MWyfEtegoprVNJqnVQed7UPwE9ewLf6nZZnU5vjIPe9CnxOLUKgnLsQK/QNc0UWtHSvtJ8m7KjM88ou1xHyD+IcyS0KmqeOJJcRqUgVAyt8JtJe3jwby+7GEUw+If03HkDpW5cV5mkSiohI0QI94cPqeXdAUdWtRxV7jGl04I=
  - secure: F9Bk1+yvxyc2dF0QeOjngO9QGFfMhzaxwNRcJcSaixZ75x8UnvsULxVmTIIYi+G4LqQWffg1slorjnIJN5PB3S6D+pkgJ5/sZn1AiyMZLN5uxZf0/TY34CRVj9zsw80BPnTWgyy+RKvT5eE61W/+yPHcVNHprUplBbw4qRmWib4jXWCQGur0NlrU1+unBZlmOFUotJWQ/2TQ9ZAm2GwxEI6Am+LM2pbl+tNzRUMbXDdvb/T67leTgOqyHqymgpANIgz0Wurqs0cRczrtFjf5FLmr+hT7QkBm4pXXafEBRbZpn8OiaXex+LrphCJNP5YiIjPeRGWh6L4xsJiGVJLpWjDGzRueW+K88TGYrQ8xNCSasa7+tmfoGeKzCvvolNKMlkG13WfxsdAERIrFRs5tusjx6QQQhHOr6xBQdk7hwC7yCVjFoztGmiW+5Ot3ZfJ579Q1UAE1zv1MH4CtwJrvVItzfvWhpDdXz/Gc74lbExSV/COgdRzqsiAO86X3qpIcciF9967DrLYG4hgqBs+5e3wL0nErMdZPbHrvsHsaDmNfkuomdasiF6/4AI884sHIvB538KIX7Dg36nnpaCOfwv8TzH1hCKx2qWnlocfkqfRzPL+I0NOEvAuicpKxEBZ78s/5n8RqxKjBi2xp6FCvA1plpvq/ywOJ29oHpAidPQQ=
  - secure: RI2LPtivLFk0nCOrxh37AtcMwPIwEpXko+ORMFS+VMgFShRUrzr86bxK8JFBHavLkwKO3iE2EGY5mOMIHjBW61hDlCSb5Exd+q8Mio4hWH2SCTkO/19ENJtNkXeZWlexUfNHzVEmEahgwt4UROHlO04lH8ckNGjELe61qZ2PgwY1DlzPUhlWm8+aQLRfvIwPMH80n/8JfXvSVAmbAGqsJr/8safZ2vGQjA1D4h18HW77gGVU39T8lBXLnVS3JJQ6ABQleTnGovQROecsh4CmmgVRdg9YPBoupVnb0FfLtvTfACn/00s+cXuWji6VEV/22yYmt+KJQODqKtJjPFcIV1bq1apYmGuTTfrgXWhAxlpFII4YKROMagUaprD8eGFohkakSSn1aMlnT+zAtuG4ThbiRIJY4sHsNdI6vExS9n6zD/Q5Ih4zET+KKkszcavXxDADMgMeKCzNeY1SJwbJFYy6yvCrJMBEK18FkG0FORviWwXqAQZjFy4AHuv4pAKXefgQfxfcgFI2Tkkbcc/b/e71XijEZvJ6iIt1FXZLLMh2i/cWuy5voCQ93cUaclFziLRJvuBQhBY2wMJanceqMnvRnS58yFS//ESLGxD9ZgV6AI1sK5KKgulW3LiBoH7ypxgxv4pw7PDd7vmIbXlZKVtTNUkwItq1d81L/PqGPp0=
  - secure: NJuSH/4Lm+2Pzu1IO61cbAIoQiqujzqMA6wUsCP1T6fFZWe8nE/5BkuL1U+iPo9/voqUlSFMXr+wn0QwThTdkT3yimA2YCSF6VIJncz/T/ZDH8k7LO8z1pKnV3sPzBdZlD6YhT+nzVd4J6XHbS3fKn51pUsfAp02BG/1lx5zqNbjDjgpO7DGooxSGpN2yx2Y4Or8luaw/fpF4O9K5OAfbdPxXSxT4U/RpfATH/PUeUnZKZxBLbxGX1O5X4IaGSP2ZeillvESgecj9NV9XSpO6whMJTjVsh+Biqp4YE8SybNySu0Nic8CeyN/TGmC3L9Gb7R98WhDxT07EmNS/69D9TuGZASNFebN2zRYTQeiTBN/6upXSgoenrpPFbhqHBEyG+zh2BhyjwfGImTv35nW1AcgtDW4bD5GGrXW/VkRc2vd/z3+Dx5jAHOOcrw8yshx3ec2inTSjHw62XhvqmiJfLuGiHC93hJQYu00Y6RpNruWd3zeH2j+hGzcBWoNU5YDl5H1O7F7fg4N9JupooWKZGv0QjZOuOqAp7Gt1uqH2ymLuJQBNWKZn6ZfGAT9/s6t7ZsffQ/5N1UNTRcsPQqg/JTj3luHqsCfJniydz4ZjcwlKxGDzPrQEWnDdcv8ZDz9YiqRLvf4fOqrmGJO/MiQLrq9Ebv9Piih2IpHHVmiOvE=
  - secure: UWZ5orPPvsPRvkryqQLVUy8KCTcDzYrTTIunqhBUaJR+/GXNChVQpKSZQkqhZKoOexo6TIbUrbNjPQs0kOXwEZz8HM584V7beD3L4N7ZIOyrdewBInG7XaxepQKV4sRsVenezZIHmryrSaL9Txb9gWSmeKml55kBfNeOJn+i0uj2AMv6w52ScSX5sE2GQ1GTOMcIKwM88NLCdCbuLjPcaVkssP54aumQAzixnYEMdA12h5i6OZe3AwVXpOsiVoydIPgREA/twkrLqG4WEOOTOMGlxyJuwsuvh7sPJLZhoqcolrwixy6WiNZT7cjmOLGidz4jaoNgyslf62vP3go3M3RjQWSpI+yUYCw7agmAF2c0N0xbKl7FovpD20NQzOHbTgcORZY+pRS47lUNskbGs0Uuyaso1o6Aiere5EzZQ7lFo620fZi/Fkihkg9zuyFzFKm7kavVXutuPvp0yUefgpPghVrZXbqZ0bVm3VeO7VMaDKdWT13tt+bykHeWZDiaF7b97qjCF2Ls7tScFzIFdfnGejZyYZZzjhmt2xkV0AMjZKFHFBZCNbayK/6Q2LRvUMk28WLvv8uNrJzokPhD+S6052apXmolle2XtGsK1gSqJyGPX9iyEpVfgSVYfIm5p+UdLtCw0Sf+WHMAjCA/G/mR40KTnOPMy+loSVrLAzk=
  - secure: oZgDPON9KrdehQnnQmjmpsHS8ovvBROR8zspt9ZLTsNKcZQIyZBRVUvk4s+Sm1r9MJCK//XWM/pc0NRvaoqS9b+Hzvxyc2AKJL95aGQXJ3HlRMz2EMjfGXrTNdL7hYaQ+i1D0pGA/IhqkUNr1bYYzOYN5nEW41XwYsTm29/ucv8J26G/K6fcha+W9pTVsiJ1Avs5oNLGgbr/1kj1vCBp/80xAvS8R2f2vNli3MNEUTu/c6/44dpQrBrhUXrPDIo13J8eeETDQlmoI8vgMn49/GsksZ63p0dsoL2OzJNDZCTXjOONf/WbD4f/pvERXkocZGFbwkQAs1b7FdzFndYWIGptK4CnvA+bxDjQRkRbCqDonmgyLIyGD3n+fgcNfG/9EZ7pct77MeRakRi6pTCppCHzZosOftwz8A8whU+mCQ6FDuzCQLzzoJ1GbdeFj9XjUYwkvhXfv8ky5sH8RpTchzBWuh1uv7/fIHpKQIRgGB4yuwDHds3hLi1qwxK/vy5yHOhizLuBX612TgoW3BupZavYEtOkppObUuc6di3cuPsY0RbEHnnmTYt+10NswcXI2dEmYhABbeg8fRE+mziUHA10pkV0Pt/MuuNOtNjKDTk7BOtGfm+z/f5ZMdUZfM1zOAQhakYc1Y+9SRqM5BhqCjfjYwmWP2mfWsdhbXu9o/4=
  - secure: nkogcjC7/LBnyH+xnsDQ4fGdca3CYHDAEp2gpcJJ6o6jOZXRN4js9b9sbuJc2HsDF7J4rQkjUMqQEunmsLUxFMIoLw9mLuIiv9KDq7DHemJwD97HQh5jiyTBCfdr9LYoH2Kumq+2pHYF/uUZMB2iNNGTf+MQt/su8JYq+e0CUJv7mLFva3NGkPsZxgstroeh61OuiHYRPyM3b8QemQut/ZSc95ZpOuPdjbVX6vEoJjAoO0bQM5aadrFSbSyFhHLY+xhuTR62It7kjyNNBLdAyuXVCfSxGoDqze8watOxD+Mgp8smL/C4voTl2HnckkzRKgarT4GoB1sG5QfNK5daU26IzbPryEhjC6Soih+57vaSTCANAxi0oSrGb7UMTasDDcNYgx53HXFCDmq7bRm7m+Ri5ucEoFdH7WFj11u3WRpeiTwTEoZT+Q13vcMheJvFptMkNsA9HyTSYFL0Nj8d3GFOlb4OaPYeZInBtvmpNfIJ123dVV7Kq8aM3JzxFU64fL49bDaUIiqvHdvvKtIh9T0cXjKlD+wMHtJB8de+YrVWsDRLqQz0Tevj/GWwoLUz5lSN+e7a/cStY7Osp6BDFKuf5Blj9DhyzVnynlntdVA1SEad4e5y/eDkXdx9UcOAi4R2T1UP2s/ZKjlM+3mBl6FSOLU3a6daK3gs6u+MpLA=
  - secure: G/JXwx94FPTq3NbGc0NYwReOOmU0MJPy9vKU71AjnJrMsZ3I9GTGz0eiWEqqguJcVrZ9mZRizt2h7jlawys/PE17/IWrjSldTnobyBnpiQiXd8bwNytg46m/0grQM3tkSnheXfKNsqQqXdUhaOoIBDpjpHrkzR11p/p4o8grx4q6R43FCLr5MSH/Igach2lKuPzj0Nb/6RZFsBijRDESPXYYk76WDQ3JB6n/RcvCNlbpgGO58dzkDtfFZsV3PS0povBlu+wKJW2Z1hrXo9JC7nIgsPBAEb+EJEoWtmJ5oYiIbMJSt2mvnhNbT/ets4dIV9Dn5PYcTZIcSKsMjAPIT05rR1cQRjvf4YIztAKLI6dx8IB8qDvIDbfK5RPQhELR8Wj+II+tShW/VJA4Zz5rgALjUxURtP13yZoLAGkIELWxPkbkS+kZrJYNideOS28rro0vZLhfV0ILEQ6gIP3MyjdhN9Y0I4+te2BTQjE7bLs7ogAkR02kWqwvt0WTrrEbV4N/TGKGBKaERkYQboPO17mNxKBDojXbanZ+AmDZ3skPTk8EIRu9zYXQnKkPc3/do52oEOywN/16i881UX8W05CSJRasEO7W3aiCVkc4oZu+1jMMBguAFmALntl3S3A62MObXPsD2XWgatld239z27KFnGMQ9NZd3Jo9AHgcQSw=
  - secure: pJas4pMr4IWyCGcKiKuOSjt/9Nq0iugMPWIcZFr3pBKytIt//eefpfAZrUJ5EJTRipkqYF8z9Z4dD6PpbmhMGMjBV72AdZAgoPiuL4rGsoX9Vuzae2nqbPHng+6CYD6TrkfZeJVb0u43vTrlQGx9ItpJF0Gsg+GVCDidSSHoBpXQTA2TlRE64sm80bm1hqUn73hjbdGTD8M32LeWOF7RSu8ye7zJUyjBPmxRhV8OyQKTuPqBP4igKf5TCQHHSKJgYkF+JeOjBiF0iIICwmScOStIURxfd/lZeJeHzsNmFof/9h2crIkOqOLA9CkCYpCDzzloC1UhfyLzIbl4DkLW3JtVCtbQfDw/Fa7dNJtcbawk2Gj+6aszeRkzE90+G1cTOXsuNh4HjluPsjiGBKS0F/XTSG1RDQjyYyVhFhEc75QFl5J78096UuW3jhSbRmn1LijN5k3UILxg/Pw8VoX0tu+NpPR8o+MXvhr6zBileOV/+knX/DvsWKrUk0lCW/81OW9kEBAVzMmJby54fHrS0+qWFgneyZc7QolwQ8wjmzSV8+353rje3fX0jUCIIyTrrKHRWf44Ii+U4vKPaxDf6ObVWbBiN3GVGhBf1tRfMDoj0k1xEOdR51BGpWaNz0lCkb3LoGJtlC34FVojXqNrnJlyZ8TGk6xLkdfJveyt1R8=
install: "/bin/true"
script:
- if [ "$TRAVIS_PULL_REQUEST" != "false" ]; then bash ./travis-build-pr.sh; fi
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then bash ./travis-build.sh; fi
after_deploy:
- "./gradlew sdkMajorRelease"
cache:
  directories:
  - "$HOME/.gradle"
deploy:
  provider: releases
  api_key:
    secure: WHH8c5d6dGOmU4T5EUu1uWlmUqtbe5h6o9DNXRQYQe1v8+ep/igYoB0zxCtL0o7wtrN/l1T1+evHEYMpeylYAlyDxmH1sFgMn+ZQNbELcHOzhdErdOlp97/ZRGOW58haWWp3md+UjM9Z4jZBw2/1coxJUYioLBB5WZuzYxsq8hGVyZYqFObY8pKlc4ncTKsfRFeUgKOtIB5EWda8vXSkd9ocxVvxxtyN9UVPeQQ+mi5d/6pQPI0zRii9DUQ77lncV3LVS5vtr+1M2OGSK4FdQuWt6eToPTJCK9NfB3CZOwlgEucpfLy8pcJLtxZp4gIzAW2/5WtG6u52TbdUvgNAcDtU0o98z6zs7vUuS/ef7L7QKnm6VzbYbwYDSUePDxlXtdTAYj+7AaMgAyEofDhm/Yi7aLsVXDcNeXb5naB17Fe6GFPW2dg6tCVcpYwOJRwH0TQRdd7ZMLwZoSIUT1v2zWTjyLjCSmvrvQIBgJOue8bSES2JFKIbGUQqOj/VrJIF2AbH0wdn9cALEy21qeRuB1lqTKBpb2lLjeHfxhWAXkKXHiGCNbXbo3eC6HDMoe6Fd17ehxWr3cPx5I0RTZQrkQD+mX/xiYM3FAxPIhyrdAibTjhqSgCN5hccHLLFVB0K8arKmhAmW6HkuSKZx1KWKyIhMKwF2UqEKJbSVYqr2qU=
  file: cli/build/distributions/micronaut-${TRAVIS_TAG:1}.zip
  on:
    repo: micronaut-projects/micronaut-core
    tags: true
    all_branches: true
